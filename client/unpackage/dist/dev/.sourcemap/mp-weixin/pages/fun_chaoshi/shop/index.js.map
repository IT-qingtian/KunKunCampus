{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/87634/Desktop/KunKunCampus/client/pages/fun_chaoshi/shop/index.vue?7a34","webpack:///C:/Users/87634/Desktop/KunKunCampus/client/pages/fun_chaoshi/shop/index.vue?c650","webpack:///C:/Users/87634/Desktop/KunKunCampus/client/pages/fun_chaoshi/shop/index.vue?ee2d","webpack:///C:/Users/87634/Desktop/KunKunCampus/client/pages/fun_chaoshi/shop/index.vue?e08a","uni-app:///pages/fun_chaoshi/shop/index.vue","webpack:///C:/Users/87634/Desktop/KunKunCampus/client/pages/fun_chaoshi/shop/index.vue?6fcb","webpack:///C:/Users/87634/Desktop/KunKunCampus/client/pages/fun_chaoshi/shop/index.vue?5717"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","data","place_order_ing","imgShow","is","address","placeOrder","goods","goods_li_arr","goods_li_arr_end_height","anchor_id","scroll_top","scroll_view_height","paging_current","shops_index","shopData","img_address","comment","loading","serverAddress","onLoad","id","computed","place_order_price","class_","price","methods","showImg","closeImgShow","view_init","query","query_","parseInt","getShopInfo","uni","url","method","header","code","msg","console","goods_","is_business","start_time","end_time","title","icon","click_place_order","item","number","arr","shop_id","payInfo","tmplIds","complete","change_paging","change_paging_swiper","shops_select_click","scroll_goods_","clearTimeout","sum"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,+QAEN;AACP,KAAK;AACL;AACA,aAAa,yTAEN;AACP,KAAK;AACL;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1GA;AAAA;AAAA;AAAA;AAA+lB,CAAgB,ynBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACmOnnB;AAEA;AAAA;AAAA;AAAA,eAEA;EACAC;EACAC;IACA;MAEAC;MAEA;MACAC;QACA;QACAC;QACA;QACAC;MACA;MAEA;MACAC;QACAC;UACAC;UACA;UACAC;UACAC;UACAC;UACAC;QACA;MACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;QACA;QACAR;QACAS;QACAC;MACA;MACAC;MACA;MACAC;IACA;EACA;EACAC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACAC,YACA;cAAA,MACAA;gBAAA;gBAAA;cAAA;cAAA;YAAA;cACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAEA;EACAC,0CACA;IACAC;MACA;MACA;QACA;QACAC;UACAC;QACA;QACA;MACA;MACA;MACA;MACA;IACA;EAAA,EACA;EACAC,yCACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACAC;QACA;QACA;MACA;;MAEA;MACA;MACAC;QACA;QACA;QACA;QACA;QACA;QACA,kDACAC,0HACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAC;kBACAC;kBACAC;kBACA;kBACAC;oBACA;kBACA;kBACApC;oBAAAoB;kBAAA;gBACA;cAAA;gBAAA;gBAAA,+CARApB;gBAAAqC;gBAAArC;gBAAAsC;gBAAA,IASAD;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAEA;gBACAE;;gBAEA;gBACAvC;kBACA;kBACA;oBACAuB;sBACAiB;oBACA;oBACA;kBACA;gBACA;gBAGA;gBACA;gBACAD;gBACA;;gBAEA;gBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAE;MACA;MACA;QAAAC;QAAAC;MACA;MACA;QACAV;UACAW;UACAC;QACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IAEA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA,KAGA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACA;gBAEAP;gBAEAjC,+BACA;gBACAkC;kBACAO;oBACA;sBACA;sBACA;wBAAAhD;wBAAAyB;wBAAAwB;sBACA;wBAAA5B;wBAAArB;wBAAAyB;wBAAAwB;sBAAA;sBACAC;oBACA;kBACA;kBACA;gBACA;gBACAV;;gBAEA;gBAAA,IACAC;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAGAP;kBACAC;kBACAC;kBACAC;oBACA;kBACA;kBACApC;oBACAkD;oBACA5C;kBACA;gBACA;cAAA;gBAAA;gBAAA,gDAVAN;gBAAAqC;gBAAArC;gBAAAsC;gBAWAC;gBACA;gBAAA,IACAF;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACAc,4EACA;gBACAlB;kBACAmB;kBACAC;oBACA;oBACA;oBACA;oBACA;oBACApB;sBACAC;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IACA;IACAoB;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MAEA;MACA;MACA;;MAEA;MACAC;MACA;MACA;QACA;QACA;QACA;QACA;UACAC;UACA;YACA;YACA;YACA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;EAAA;AAEA;AAAA,2B;;;;;;;;;;;;;ACreA;AAAA;AAAA;AAAA;AAAkqC,CAAgB,woCAAG,EAAC,C;;;;;;;;;;;ACAtrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/fun_chaoshi/shop/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/fun_chaoshi/shop/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=1dcc01c0&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1dcc01c0&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1dcc01c0\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/fun_chaoshi/shop/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=1dcc01c0&scoped=true&\"","var components\ntry {\n  components = {\n    uSkeleton: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-skeleton/u-skeleton\" */ \"uview-ui/components/u-skeleton/u-skeleton.vue\"\n      )\n    },\n    uTag: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-tag/u-tag\" */ \"uview-ui/components/u-tag/u-tag.vue\"\n      )\n    },\n    uNumberBox: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-number-box/u-number-box\" */ \"uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uAvatar: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-avatar/u-avatar\" */ \"uview-ui/components/u-avatar/u-avatar.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.shopData.img_address.length\n  var g1 = g0 ? _vm.shopData.img_address[0].replaceAll(\"\\\\\", \"/\") : null\n  var g2 = _vm.shopData.goods.length\n  var g3 = _vm.shopData.goods.length\n  var g4 =\n    !!_vm.place_order_price &&\n    _vm.place_order_price < _vm.shopData.start_run_price\n      ? Math.round((_vm.shopData.start_run_price - _vm.place_order_price) * 100)\n      : null\n  var g5 = _vm.shopData.comment.length\n  var l0 =\n    g5 > 0\n      ? _vm.__map(_vm.shopData.comment, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g6 = item.img ? item.img.replaceAll(\"\\\\\", \"/\") : null\n          return {\n            $orig: $orig,\n            g6: g6,\n          }\n        })\n      : null\n  var l1 = _vm.__map(_vm.shopData.img_address.slice(1), function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g7 = item.replaceAll(\"\\\\\", \"/\")\n    return {\n      $orig: $orig,\n      g7: g7,\n    }\n  })\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event, item) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item\n      var _temp, _temp2\n      _vm.showImg(_vm.serverAddress + item.replaceAll(\"\\\\\", \"/\"))\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n        l0: l0,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <u-skeleton\n      rows=\"3\"\n      title\n      :loading=\"loading\"\n  >\n    <div class=\"shopInfo\">\n      <!--店铺头信息-->\n      <div class=\"head\">\n        <p class=\"title\">{{ shopData.title }}\n          <image mode=\"widthFix\"\n                 v-if=\"shopData.img_address.length\"\n                 :src=\"`${serverAddress}${shopData.img_address[0].replaceAll('\\\\','/')}`\"\n                 alt=\"加载图片失败\"/>\n        </p>\n        <!--标签-->\n        <div class=\"tags\">\n          <u-tag\n              size=\"mini\"\n              dark\n              v-for=\"(tag,index_tag) in shopData.tags\"\n              :key='index_tag' :text=\"tag\">\n          </u-tag>\n        </div>\n        <text class=\"notice\">\n          公告：{{ shopData.notice }}\n        </text>\n      </div>\n      <!--分页-->\n      <div class=\"paging\">\n        <!--导航-->\n        <div class=\"nav\">\n          <span @click=\"change_paging(0)\" :class=\"{active : paging_current===0}\">下单</span>\n          <span @click=\"change_paging(1)\" :class=\"{active : paging_current===1}\">店铺评论</span>\n          <span @click=\"change_paging(2)\" :class=\"{active : paging_current===2}\">商户信息</span>\n        </div>\n        <swiper class=\"pages\" :current=paging_current @change=\"change_paging_swiper\">\n          <swiper-item>\n            <div class=\"page placeOrder\">\n              <div class=\"shop_goods\">\n                <!--导航-->\n                <scroll-view class=\"nav\"\n                             :style=\"{height: placeOrder.goods.scroll_view_height}\"\n                             scroll-y>\n                  <ul>\n                    <li v-for=\"(item,index) in shopData.goods\" :key=\"index\"\n                        :class=\"{'nav_active':index===shops_index}\"\n                        @click='shops_select_click(index)'>\n                      {{ item.title }}\n                    </li>\n                  </ul>\n                </scroll-view>\n\n                <scroll-view\n                    :style=\"{height: placeOrder.goods.scroll_view_height}\"\n                    @scroll=\"scroll_goods_\"\n                    :scroll-into-view='placeOrder.goods.anchor_id'\n                    :scroll-top=\"placeOrder.goods.scroll_top\"\n                    scroll-y class=\"goods\">\n                  <!--渲染物资-->\n                  <ul>\n                    <li v-for=\"(goods,index) in shopData.goods\"\n                        :id=\"'goods_anchor_id_'+index\"\n                        :key=\"index\" class=\"goods_li_\"\n                        :style=\"{height:\n                                          shopData.goods.length-1 === index ? (placeOrder.goods.goods_li_arr_end_height == 0?'auto': placeOrder.goods.goods_li_arr_end_height) :'auto'}\"\n                    >\n                      <!--拿到标题-->\n                      <text class=\"title_\">{{ goods.title }}</text>\n                      <!--以及商品-->\n                      <ul class=\"goods_\">\n                        <li v-for=\"(shops,index_) in goods.goods\"\n                            :key=\"index_\">\n                          <div>\n                            <div class=\"img\">\n                              <image mode=\"widthFix\"\n                                     :src=\"`${serverAddress}${shops.img_address[0]}`\"\n                                     alt=\"加载图片失败\"/>\n                            </div>\n                            <div class=\"describe\">\n                              <p class=\"goods_name\">{{ shops.name }} <span class=\"sales\">(月售{{\n                                  shops.month_sales\n                                }}份)</span></p>\n                              <div class=\"tags_\">\n                                <u-tag plain\n                                       v-for=\"(tag,index_tag) in shops.tags\"\n                                       :key='index_tag' :text=\"tag\">\n                                </u-tag>\n                              </div>\n                              <div class=\"price\">\n                                <span>售价：{{ shops.price }}</span>\n                                <u-number-box\n                                    slot=\"right-icon\"\n                                    v-model=\"shops.number\"\n                                    step=\"1\"\n                                    :min=\"0\"\n                                    :showMinus=\"shops.number > 0\">\n                                  <view\n                                      slot=\"minus\"\n                                      class=\"minus\"\n                                  >\n                                    <u-icon\n                                        name=\"minus\"\n                                        size=\"12\"\n                                    ></u-icon>\n                                  </view>\n                                  <text\n                                      slot=\"input\"\n                                      style=\"width: 50px;text-align: center;\"\n                                      class=\"input\"\n                                  >{{ shops.number }}\n                                  </text>\n                                  <view\n                                      slot=\"plus\"\n                                      class=\"plus\"\n                                  >\n                                    <u-icon\n                                        name=\"plus\"\n                                        color=\"#FFFFFF\"\n                                        size=\"12\"\n                                    ></u-icon>\n                                  </view>\n                                </u-number-box>\n                              </div>\n                            </div>\n                          </div>\n                        </li>\n                      </ul>\n                      <div class=\"end_\" v-if=\"shopData.goods.length-1 === index\">已经没有更多数据啦\n                      </div>\n                    </li>\n                  </ul>\n                </scroll-view>\n              </div>\n              <div class=\"settle\">\n                <div class=\"money\">\n                  <text>￥{{ place_order_price }}元</text>\n                </div>\n                <div class=\"over\">\n                  <p v-if=\"!place_order_price\">{{ shopData.start_run_price }}元起送</p>\n                  <p v-else-if=\"place_order_price < shopData.start_run_price\">\n                    差{{\n                      Math.round((shopData.start_run_price - place_order_price) * 100) / 100\n                    }}元起送</p>\n                  <div v-else @click=\"click_place_order\">确认订单</div>\n                </div>\n              </div>\n            </div>\n          </swiper-item>\n\n          <swiper-item>\n            <div class=\"page comment\">\n              <scroll-view\n                  scroll-y\n                  v-if=\"shopData.comment.length > 0\"\n                  :style=\"{height: placeOrder.goods.scroll_view_height}\"\n              >\n                <view>\n                  <!--渲染开始-->\n                  <view\n                      class=\"item\"\n                      v-for=\"(item,index) in shopData.comment\"\n                      :key=\"index\">\n                    <view class=\"head\" style=\"display: flex;align-items: center\">\n                      <u-avatar size=\"20\" :src=\"item.head\"></u-avatar>\n                      <text class=\"name\">{{ item.name }}</text>\n                    </view>\n                    <view class=\"body\">\n                      <view class=\"content\">{{ item.content }}</view>\n                      <view class=\"img\" v-if=\"item.img\">\n                        <img mode=\"widthFix\" :src=\"serverAddress + item.img.replaceAll('\\\\','/')\" alt=\"（找不到图片）\">\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </scroll-view>\n              <view v-else class=\"no_comment\">\n                还没有评论呢，要不要下单抢占沙发呢？~\n              </view>\n            </div>\n          </swiper-item>\n\n          <swiper-item>\n            <div class=\"page merchant\">\n              <view class=\"item\">\n                <view class=\"key\">商户地址</view>\n                <view class=\"value\">{{ shopData.address }}</view>\n              </view>\n              <view class=\"item\">\n                <view class=\"key\">商家电话</view>\n                <view class=\"value\">{{ shopData.phone_number }}</view>\n              </view>\n              <view class=\"item\">\n                <view class=\"key\">营业时间</view>\n                <view class=\"value\">{{ shopData.start_time }} - {{ shopData.end_time }}</view>\n              </view>\n              <!--展示图-->\n              <view class=\"t\">\n                展示图\n              </view>\n              <view class=\"imgs\">\n                <view class=\"img\"\n                      v-for=\"(item,index) in shopData.img_address.slice(1)\"\n                      :key=\"index\"\n                >\n                  <image\n                      mode=\"widthFix\"\n                      @click=\"showImg(serverAddress + item.replaceAll('\\\\', '/'))\"\n                      :src=\"serverAddress + item.replaceAll('\\\\', '/')\">\n                  </image>\n                </view>\n              </view>\n\n            </div>\n          </swiper-item>\n        </swiper>\n      </div>\n    </div>\n    <!--展示图-->\n    <view class=\"imgShow\" v-show=\"imgShow.is\" @click=\"closeImgShow\">\n      <image :src=\"imgShow.address\" mode=\"widthFix\"></image>\n    </view>\n  </u-skeleton>\n\n</template>\n<script>\n// 导入vuex\nimport {mapState, mapMutations} from \"vuex\";\n// 引入配置文件\nimport {serverAddress} from '@/configs/configs'\n\nexport default {\n  name: \"index\",\n  data() {\n    return {\n\n      place_order_ing: false,\n\n      // 图片展示\n      imgShow: {\n        // 是否展示图\n        is: false,\n        // 地址\n        address: \"\"\n      },\n\n      // 分页_下单页\n      placeOrder: {\n        goods: {\n          goods_li_arr: [],\n          // 最后一个元素高度\n          goods_li_arr_end_height: '0',\n          anchor_id: '',\n          scroll_top: \"0\",\n          scroll_view_height: '0'\n        },\n      },\n      // 分页——当前选择\n      paging_current: 0,\n      // 商品类别\n      shops_index: 0,\n      // 店铺信息\n      shopData: {\n        // 默认值\n        goods: [],\n        img_address: [],\n        comment: [],\n      },\n      loading: true,\n      // 服务器地址\n      serverAddress\n    }\n  },\n  async onLoad(op) {\n    const {id} = op\n    //     无参数的话 返回上个页面\n    if (id === undefined) return uni.navigateBack()\n    //     根据id去获取商店信息\n    this.getShopInfo(id)\n\n  },\n  computed: {\n    ...mapState('store_user', ['token']),\n    place_order_price() {\n      // 累计每个类\n      const n = this.shopData.goods.reduce((price, class_) => {\n        // 遍历每个分类里的物资\n        class_.goods.map(item => {\n          price += item.price * item.number\n        })\n        return Number(price.toFixed(2))\n      }, 0)\n      // 保留两位小数\n      // return Math.floor(n * 100) / 100\n      return n\n    }\n  },\n  methods: {\n    ...mapMutations('store_user', ['update_temp_data']),\n    showImg(address) {\n      this.imgShow.address = address\n      this.imgShow.is = true\n    },\n    closeImgShow() {\n      this.imgShow.is = false\n    },\n    // 初始化\n    view_init() {\n      // 处理scroll-view的适配度\n      const query = uni.createSelectorQuery()\n      query.select('.shop_goods').boundingClientRect(data => {\n        // console.log(data)\n        this.placeOrder.goods.scroll_view_height = data.height + \"px\"\n      }).exec();\n\n      //  分断\n      const query_ = uni.createSelectorQuery()\n      query_.selectAll('.goods_li_').boundingClientRect(arr => {\n        // 如果没有值 那就不处理\n        if (!arr.length) return console.log('错误啦')\n        this.placeOrder.goods.goods_li_arr = arr\n        //  处理最后一个元素高度  当最后一个盒子高度小于scroll-view的高度时，最后一个盒子为 scroll-view的高度  否则多出一截\n        const end_li_h = arr.length - 1\n        this.placeOrder.goods.goods_li_arr_end_height =\n            parseInt(this.placeOrder.goods.goods_li_arr[end_li_h].height) <= parseInt(this.placeOrder.goods.scroll_view_height) ?\n                this.placeOrder.goods.scroll_view_height : this.placeOrder.goods.goods_li_arr[end_li_h].height + 50 + 'px'\n      }).exec();\n    },\n    // 获取店铺信息\n    async getShopInfo(id) {\n      const {data: {code, data, msg}} = await uni.$httpRequest({\n        url: \"shop/getShop\",\n        method: \"post\",\n        // 携带token\n        header: {\n          \"authorization\": `bearer ${this.token}`\n        },\n        data: {id}\n      })\n      if (!code) return uni.$showMsg(msg)\n\n      //  解析\n      console.log(data.result, '店铺数据')\n\n      // 格式化data.result 将里面的goods遍历 然后给每个goods添加一个number属性 默认值为0   赋值给 this.shopData\n      data.result.goods = data.result.goods.filter(class_ => {\n        // 当这个分类没有 商品时 跳过\n        if (class_.goods.length) {\n          class_.goods.forEach(goods_ => {\n            goods_.number = 0\n          })\n          return class_\n        }\n      })\n\n\n      this.shopData = data.result\n      this.loading = false\n      console.log(this.shopData, '格式化以后的店铺数据')\n      this.is_business()\n\n      // 下次更新页面的时候 初始化\n      this.$nextTick(() => {\n        this.view_init()\n      })\n    },\n\n    // 打样判定\n    is_business() {\n      const dt = new Date();\n      const {start_time, end_time} = this.shopData;\n      const currentTime = `${String(dt.getHours()).padStart(2, '0')}:${String(dt.getMinutes()).padStart(2, '0')}`;\n      if (!(currentTime >= start_time && currentTime <= end_time)) {\n        uni.showToast({\n          title: \"店家已打样~\",\n          icon: \"error\"\n        });\n        return false\n      } else {\n        return true\n      }\n    },\n    // 下单\n    async click_place_order() {\n\n      if (!this.is_business()) return\n\n\n      if (this.place_order_ing) return console.log('正在下单中')\n      this.place_order_ing = true\n\n      console.log('点击下单，正在列出信息', this.shopData.goods)\n\n      const goods = this.shopData.goods\n      //     遍历goods这个数组 并取出 所有number大于0的物资\n      const goods_ = goods.reduce((arr, item) => {\n        item.goods.map(item_ => {\n          if (item_.number > 0) {\n            // 获取物品名称、价格、数量\n            const {id, name, price, number} = item_\n            const new_item = {id, name, price, number}\n            arr.push(new_item)\n          }\n        })\n        return arr\n      }, [])\n      console.log('整理好后的数据', goods_)\n\n      // 判定是否有物资\n      if (!goods_.length) return uni.$showMsg('您还没有选择想要的东西呢')\n\n      // 创建订单，并且 办理签证信息。\n      const {data: {code, data, msg}} = await uni.$httpRequest({\n        url: 'shop/createOrder',\n        method: \"post\",\n        header: {\n          \"authorization\": `bearer ${this.token}`\n        },\n        data: {\n          shop_id: this.shopData.id,\n          goods: goods_\n        }\n      })\n      console.log(data, msg, code)\n      this.place_order_ing = false\n      if (!code) return uni.$showMsg(msg)\n      const {payInfo, subscribeMessageArray} = data\n      // 授权订阅消息\n      uni.requestSubscribeMessage({\n        tmplIds: subscribeMessageArray,\n        complete: (res) => {\n          // 跳转到确认付款页面\n          // 使用vuex  携带临时数据 payInfo\n          // this.update_temp_data({pay: payInfo})\n          // 跳转页面的时候 携带订单号 以便页面去查询\n          uni.navigateTo({\n            url: `/pages/fun_chaoshi/comfirm/index?out_trade_no=${payInfo.out_trade_no}`\n          })\n        }\n      })\n\n\n    },\n    // 切换分页\n    change_paging(index) {\n      this.paging_current = index\n    },\n    // 切换分页\n    change_paging_swiper(e) {\n      this.paging_current = e.detail.current\n    },\n    //     选择分类\n    shops_select_click(index) {\n      this.shops_index = index\n      this.placeOrder.goods.scroll_with_animation = true\n      this.placeOrder.goods.anchor_id = \"goods_anchor_id_\" + index\n    },\n    //   滚动_物资\n    scroll_goods_(e) {\n\n      const top = e.detail.scrollTop\n      // console.log(top, this.placeOrder.goods.scroll_top)\n      // this.placeOrder.goods.scroll_top = top + \"px\"\n\n      // 阀\n      clearTimeout(this.scroll_goods_timer)\n      // 根据位置来定义shops_index\n      this.scroll_goods_timer = setTimeout(() => {\n        const arr = this.placeOrder.goods.goods_li_arr\n        let sum = 0\n        // 遍历所有分类的高度，当高度大于滚动的高度时，就是当前的分类\n        for (let i = 0; i < arr.length; i++) {\n          sum += arr[i].height\n          if (parseInt(top) < parseInt(sum)) {\n            // console.log(i)\n            this.shops_index = i\n            break\n          } else if (parseInt(top) === parseInt(sum)) {\n            this.shops_index = i + 1\n            break\n          }\n        }\n      }, 100)\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n//引入图标库\n@import url('../../../static/index/iconfont/iconfont.css');\n//@import url('@/static/index/iconfont/iconfont.css');\n\n/deep/ .u-tag {\n  position: static;\n  margin: 0 2px 2px 0 !important;\n}\n\n.shopInfo {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n\n  padding: 5px;\n  box-sizing: border-box;\n\n  .head {\n    .title {\n      position: relative;\n      font-size: 65rpx;\n      font-weight: bold;\n      vertical-align: middle;\n\n      image {\n        margin-left: 15px;\n        width: 85rpx;\n        height: 85rpx;\n      }\n    }\n\n    .tags {\n      display: flex;\n\n      .u-tag {\n        border: 1px solid orange !important;\n        color: orangered;\n        border-radius: 5px;\n        //box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.44);\n      }\n    }\n\n    .notice {\n      display: block;\n      //color: #8f8f94;\n      font-size: 30rpx;\n      max-width: 100vw;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  }\n\n  .paging {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n\n    > .nav {\n      margin: 12px 0 4px;\n      position: relative;\n\n      span {\n        transition: all 0.5s;\n        margin-right: 5px;\n        color: #8f8f94;\n        font-size: 45rpx;\n        position: relative;\n      }\n\n      .active {\n        color: black;\n      }\n\n      span::after {\n        transition: all 0.5s;\n        content: '';\n        position: absolute;\n        bottom: -5px;\n        left: 0;\n        width: 0;\n        height: 4px;\n        background-color: #8f8f94;\n        border-radius: 3px;\n        opacity: 0;\n      }\n\n      .active::after {\n        width: 100%;\n        background-color: black;\n        opacity: 1;\n      }\n\n    }\n\n\n    .pages {\n      flex: 1;\n\n      .page {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n      }\n\n      .placeOrder {\n\n\n        .shop_goods {\n          display: flex;\n          flex: 1;\n\n          > .nav {\n            flex: 2;\n            text-align: center;\n            box-sizing: border-box;\n            color: #8f8f94;\n\n            ul {\n              background-color: #e1e1e1;\n\n              li {\n                background-color: white;\n                padding: 10px;\n                transition: all 0.5s;\n                -moz-border-radius-topright: 25%;\n                -moz-border-radius-bottomright: 25%;\n                //border-radius: 25%;\n              }\n\n              .nav_active {\n                color: black;\n                background-color: #e1e1e1 !important;\n                border-radius: 0;\n                //-moz-border-radius-topright: 0;\n                //-moz-border-radius-bottomright: 0;\n              }\n            }\n          }\n\n\n          > .goods {\n            //max-height: 300px;\n\n            > ul {\n              //height: 300px;\n              //overflow: scroll;\n            }\n\n            flex: 8;\n            //display: flex;\n            //flex-direction: column;\n            .title_ {\n              z-index: 5;\n              display: flex;\n              background-color: #fff;\n              top: -1px;\n              position: sticky;\n              font-size: 35rpx;\n            }\n\n            .goods_ {\n              li {\n                //background-color: darkorange;\n                margin-bottom: 3px;\n\n                > div {\n                  display: flex;\n\n                  .img {\n                    flex: 4;\n                    overflow: hidden;\n                    border-radius: 10px;\n\n                    image {\n                      //  居中\n                      position: relative;\n                      left: 50%;\n                      top: 50%;\n                      transform: translate(-50%, -50%);\n                      width: 95%;\n                    }\n                  }\n\n                  .describe {\n                    flex: 6;\n\n                    .goods_name {\n                      font-weight: bold;\n                      font-size: 30rpx;\n\n                      .sales {\n                        color: #8f8f94;\n                        font-size: 15rpx;\n                      }\n                    }\n\n                    .tags_ {\n                      margin: 5px 0;\n                      display: flex;\n                      flex-wrap: wrap;\n\n                      //  //span {\n                      //  //  padding: 3px;\n                      //  //  margin: 0 2px 2px 0;\n                      //  //\n                      //  //  border: 1px solid #8f8f94;\n                      //  //  border-radius: 5px;\n                      //  //}\n                    }\n\n                    .price {\n                      display: flex;\n                      justify-content: space-between;\n\n                      .no_show {\n                        display: none;\n                      }\n                    }\n                  }\n                }\n              }\n            }\n\n            .end_ {\n              text-align: center;\n              color: #8f8f94;\n              font-size: 30rpx;\n            }\n          }\n        }\n\n        .settle {\n          height: 80rpx;\n          display: flex;\n          background-color: black;\n          border-radius: 40rpx;\n          line-height: 80rpx;\n\n          .money {\n            padding: 0 10px;\n            color: white;\n            //font-size: 100rpx;\n            flex: 7;\n          }\n\n          .over {\n            text-align: center;\n            color: white;\n            flex: 3;\n\n            div {\n              border-radius: 0 40rpx 40rpx 0;\n              background-color: #d3d33f;\n            }\n          }\n        }\n      }\n\n      .comment {\n        .item {\n          background-color: rgb(245, 245, 245);\n          margin: 5px 0;\n          padding: 5px;\n\n          .head {\n            .name {\n              margin-left: 5px;\n            }\n          }\n\n          .body {\n            .content {\n              margin: 5px 0;\n            }\n\n            .img {\n              width: 33%;\n\n              img {\n                width: 100%;\n              }\n            }\n          }\n        }\n      }\n\n      .merchant {\n        .item {\n          display: flex;\n          padding: 8px 3px;\n          border-bottom: 1px solid rgb(147, 147, 152);\n          justify-content: space-between;\n\n          .key {\n\n          }\n\n          .value {\n\n          }\n        }\n\n        .t {\n          font-weight: bold;\n        }\n\n        .imgs {\n          display: flex;\n          justify-content: space-around;\n\n          .img {\n            background-color: rgba(0, 0, 0, 0.1);\n\n            image {\n              width: 178rpx;\n              //  居中\n              position: relative;\n              top: 50%;\n              transform: translateY(-50%);\n            }\n          }\n        }\n      }\n    }\n\n  }\n}\n\n.minus {\n  width: 22px;\n  height: 22px;\n  border-width: 1px;\n  border-color: #E6E6E6;\n  border-top-left-radius: 100px;\n  border-top-right-radius: 100px;\n  border-bottom-left-radius: 100px;\n  border-bottom-right-radius: 100px;\n  @include flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.plus {\n  width: 22px;\n  height: 22px;\n  background-color: #FF0000;\n  border-radius: 50%;\n  /* #ifndef APP-NVUE */\n  display: flex;\n  /* #endif */\n  justify-content: center;\n  align-items: center;\n}\n\n//  图片展示\n.imgShow {\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.5);\n  width: 100vw;\n  height: 100vh;\n\n  image {\n    width: 100vw;\n    //  居中\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n}\n\n</style>","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=1dcc01c0&scoped=true&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=1dcc01c0&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1697552291635\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}